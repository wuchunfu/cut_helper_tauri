# å¼€æœºè‡ªå¯åŠ¨åŠŸèƒ½å®ç°æ€»ç»“

## âœ… åŠŸèƒ½æ¦‚è¿°

æˆåŠŸå®ç°äº†å¼€æœºè‡ªå¯åŠ¨åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥åœ¨è®¾ç½®ç•Œé¢ä¸­æ§åˆ¶æ˜¯å¦å¼€å¯è‡ªå¯åŠ¨ï¼Œé»˜è®¤å¼€å¯ã€‚

## ğŸ“¦ å·²å®Œæˆçš„å·¥ä½œ

### 1. æ·»åŠ ä¾èµ– (`Cargo.toml`)

```toml
tauri-plugin-autostart = "2"
```

### 2. é…ç½®ç»“æ„æ›´æ–° (`src-tauri/src/config.rs`)

#### æ–°å¢é…ç½®å­—æ®µ
```rust
pub struct AppConfig {
    pub max_text_history: u32,
    pub max_image_history: u32,
    pub auto_start: bool,  // âœ… æ–°å¢ï¼šå¼€æœºè‡ªå¯åŠ¨
}

fn default_auto_start() -> bool {
    true  // é»˜è®¤å¼€å¯
}
```

#### æ–°å¢Rustå‘½ä»¤
```rust
// è®¾ç½®è‡ªå¯åŠ¨
#[tauri::command]
pub async fn set_auto_start(app: AppHandle, enable: bool) -> Result<(), String>

// æ£€æŸ¥è‡ªå¯åŠ¨çŠ¶æ€
#[tauri::command]
pub async fn is_auto_start_enabled(app: AppHandle) -> Result<bool, String>
```

### 3. æ’ä»¶åˆå§‹åŒ– (`src-tauri/src/lib.rs`)

```rust
.plugin(tauri_plugin_autostart::init(
    tauri_plugin_autostart::MacosLauncher::LaunchAgent, 
    Some(vec!["--flag1", "--flag2"])
))
```

### 4. åº”ç”¨å¯åŠ¨æ—¶åº”ç”¨é…ç½®

```rust
.setup(|app| {
    // æ ¹æ®é…ç½®è®¾ç½®è‡ªå¯åŠ¨
    let config_result = config::AppConfig::load(&handle);
    if let Ok(cfg) = config_result {
        let auto_launch = handle.autolaunch();
        
        if cfg.auto_start {
            let _ = auto_launch.enable();
        } else {
            let _ = auto_launch.disable();
        }
    }
    Ok(())
})
```

### 5. è®¾ç½®ç•Œé¢æ›´æ–° (`SettingsWindow.vue`)

#### UIç»„ä»¶
```vue
<a-form-item label="å¼€æœºè‡ªå¯åŠ¨" name="auto_start">
  <a-switch v-model:checked="config.auto_start" />
  <div class="form-hint">å¼€å¯åï¼Œç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨è¿è¡Œæœ¬ç¨‹åº</div>
</a-form-item>
```

#### ä¿å­˜é€»è¾‘
```javascript
// ä¿å­˜é…ç½®æ—¶åŒæ—¶è®¾ç½®è‡ªå¯åŠ¨
await invoke('save_config', { config: config.value });
await invoke('set_auto_start', { enable: config.value.auto_start });
```

#### é…ç½®ä¿¡æ¯æ˜¾ç¤º
```vue
<a-descriptions-item label="å¼€æœºè‡ªå¯åŠ¨">
  {{ config.auto_start ? 'å·²å¯ç”¨' : 'å·²ç¦ç”¨' }}
</a-descriptions-item>
```

## ğŸ—ï¸ å·¥ä½œåŸç†

### å¯åŠ¨æµç¨‹

```
åº”ç”¨å¯åŠ¨
    â†“
åŠ è½½é…ç½® (config.json)
    â†“
æ£€æŸ¥ auto_start å­—æ®µ
    â†“
true â†’ å¯ç”¨è‡ªå¯åŠ¨
false â†’ ç¦ç”¨è‡ªå¯åŠ¨
```

### ä¿å­˜æµç¨‹

```
ç”¨æˆ·åˆ‡æ¢å¼€å…³
    â†“
ç‚¹å‡»ä¿å­˜
    â†“
save_config() â†’ ä¿å­˜é…ç½®æ–‡ä»¶
    â†“
set_auto_start() â†’ è®¾ç½®ç³»ç»Ÿè‡ªå¯åŠ¨
    â†“
å‘é€äº‹ä»¶é€šçŸ¥
    â†“
é…ç½®ç”Ÿæ•ˆ
```

## ğŸ“‹ å¹³å°æ”¯æŒ

### Windows
- âœ… åœ¨æ³¨å†Œè¡¨ä¸­æ·»åŠ å¯åŠ¨é¡¹
- ä½ç½®ï¼š`HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run`

### macOS
- âœ… ä½¿ç”¨ LaunchAgent
- ä½ç½®ï¼š`~/Library/LaunchAgents/`

### Linux
- âœ… ä½¿ç”¨ .desktop æ–‡ä»¶
- ä½ç½®ï¼š`~/.config/autostart/`

## ğŸ¯ ä½¿ç”¨æ–¹å¼

### å¼€å¯è‡ªå¯åŠ¨
1. æ‰“å¼€è®¾ç½®çª—å£
2. æ‰¾åˆ°"å¼€æœºè‡ªå¯åŠ¨"é€‰é¡¹
3. å°†å¼€å…³åˆ‡æ¢åˆ°**å¼€å¯**
4. ç‚¹å‡»"ä¿å­˜è®¾ç½®"
5. æç¤º"é…ç½®ä¿å­˜æˆåŠŸå¹¶å·²ç”Ÿæ•ˆ"

### å…³é—­è‡ªå¯åŠ¨
1. æ‰“å¼€è®¾ç½®çª—å£
2. æ‰¾åˆ°"å¼€æœºè‡ªå¯åŠ¨"é€‰é¡¹
3. å°†å¼€å…³åˆ‡æ¢åˆ°**å…³é—­**
4. ç‚¹å‡»"ä¿å­˜è®¾ç½®"
5. æç¤º"é…ç½®ä¿å­˜æˆåŠŸå¹¶å·²ç”Ÿæ•ˆ"

### éªŒè¯æ˜¯å¦ç”Ÿæ•ˆ

#### WindowséªŒè¯
1. **Win + R** æ‰“å¼€è¿è¡Œ
2. è¾“å…¥ `shell:startup`
3. æŸ¥çœ‹æ˜¯å¦æœ‰åº”ç”¨å¿«æ·æ–¹å¼

æˆ–è€…ï¼š
1. æ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨
2. åˆ‡æ¢åˆ°"å¯åŠ¨"é€‰é¡¹å¡
3. æŸ¥æ‰¾åº”ç”¨ç¨‹åº

#### macOSéªŒè¯
1. æ‰“å¼€"ç³»ç»Ÿåå¥½è®¾ç½®"
2. é€‰æ‹©"ç”¨æˆ·ä¸ç¾¤ç»„"
3. é€‰æ‹©å½“å‰ç”¨æˆ·
4. ç‚¹å‡»"ç™»å½•é¡¹"
5. æŸ¥çœ‹åˆ—è¡¨ä¸­æ˜¯å¦æœ‰åº”ç”¨

#### LinuxéªŒè¯
```bash
ls ~/.config/autostart/
```

## ğŸ“„ é…ç½®æ–‡ä»¶ç¤ºä¾‹

```json
{
  "max_text_history": 500,
  "max_image_history": 30,
  "auto_start": true
}
```

## ğŸ” æŠ€æœ¯ç»†èŠ‚

### è‡ªå¯åŠ¨å®ç°æ–¹å¼

#### Windows
```rust
// åœ¨æ³¨å†Œè¡¨ä¸­æ·»åŠ æˆ–åˆ é™¤å¯åŠ¨é¡¹
HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run
Key: "å‰ªåˆ‡æ¿åŠ©æ‰‹"
Value: "C:\...\å‰ªåˆ‡æ¿åŠ©æ‰‹.exe"
```

#### macOS
```xml
<!-- ~/Library/LaunchAgents/com.xxx.plist -->
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" ...>
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>com.xxx.app</string>
    <key>ProgramArguments</key>
    <array>
        <string>/Applications/å‰ªåˆ‡æ¿åŠ©æ‰‹.app/Contents/MacOS/å‰ªåˆ‡æ¿åŠ©æ‰‹</string>
    </array>
    <key>RunAtLoad</key>
    <true/>
</dict>
</plist>
```

#### Linux
```desktop
[Desktop Entry]
Type=Application
Name=å‰ªåˆ‡æ¿åŠ©æ‰‹
Exec=/path/to/app
Hidden=false
NoDisplay=false
X-GNOME-Autostart-enabled=true
```

### APIè¯´æ˜

#### Rust API
```rust
use tauri_plugin_autostart::AutoLaunchManager;

// è·å–è‡ªå¯åŠ¨ç®¡ç†å™¨
let auto_launch = app.autolaunch();

// å¯ç”¨è‡ªå¯åŠ¨
auto_launch.enable()?;

// ç¦ç”¨è‡ªå¯åŠ¨
auto_launch.disable()?;

// æ£€æŸ¥æ˜¯å¦å·²å¯ç”¨
let is_enabled = auto_launch.is_enabled()?;
```

#### JavaScript API
```javascript
import { invoke } from '@tauri-apps/api/core';

// è®¾ç½®è‡ªå¯åŠ¨
await invoke('set_auto_start', { enable: true });

// æ£€æŸ¥è‡ªå¯åŠ¨çŠ¶æ€
const enabled = await invoke('is_auto_start_enabled');
```

## âš™ï¸ é…ç½®é¡¹

| é…ç½®é¡¹ | é»˜è®¤å€¼ | ç±»å‹ | è¯´æ˜ |
|--------|--------|------|------|
| auto_start | true | boolean | å¼€æœºè‡ªå¯åŠ¨å¼€å…³ |

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### æµ‹è¯•1ï¼šå¼€å¯è‡ªå¯åŠ¨
1. æ‰“å¼€è®¾ç½®ï¼Œå¼€å¯è‡ªå¯åŠ¨
2. ç‚¹å‡»ä¿å­˜
3. é‡å¯ç”µè„‘
4. **é¢„æœŸç»“æœ**ï¼šåº”ç”¨è‡ªåŠ¨å¯åŠ¨ âœ…

### æµ‹è¯•2ï¼šå…³é—­è‡ªå¯åŠ¨
1. æ‰“å¼€è®¾ç½®ï¼Œå…³é—­è‡ªå¯åŠ¨
2. ç‚¹å‡»ä¿å­˜
3. é‡å¯ç”µè„‘
4. **é¢„æœŸç»“æœ**ï¼šåº”ç”¨ä¸è‡ªåŠ¨å¯åŠ¨ âœ…

### æµ‹è¯•3ï¼šé…ç½®æŒä¹…åŒ–
1. è®¾ç½®è‡ªå¯åŠ¨ä¸ºå…³é—­
2. å®Œå…¨é€€å‡ºåº”ç”¨
3. é‡æ–°æ‰“å¼€åº”ç”¨
4. æ‰“å¼€è®¾ç½®
5. **é¢„æœŸç»“æœ**ï¼šè‡ªå¯åŠ¨å¼€å…³æ˜¾ç¤ºä¸ºå…³é—­ âœ…

### æµ‹è¯•4ï¼šå¤šæ¬¡åˆ‡æ¢
1. å¼€å¯ â†’ ä¿å­˜ â†’ é‡å¯éªŒè¯ âœ…
2. å…³é—­ â†’ ä¿å­˜ â†’ é‡å¯éªŒè¯ âœ…
3. å†æ¬¡å¼€å¯ â†’ ä¿å­˜ â†’ é‡å¯éªŒè¯ âœ…

## ğŸ”’ å®‰å…¨æ€§

1. **ç”¨æˆ·æ§åˆ¶**ï¼šç”¨æˆ·å®Œå…¨æ§åˆ¶æ˜¯å¦å¯ç”¨è‡ªå¯åŠ¨
2. **å¯æ’¤é”€**ï¼šéšæ—¶å¯ä»¥åœ¨è®¾ç½®ä¸­å…³é—­
3. **æ— éœ€ç®¡ç†å‘˜æƒé™**ï¼šä½¿ç”¨ç”¨æˆ·çº§åˆ«çš„è‡ªå¯åŠ¨
4. **é€æ˜æ€§**ï¼šæ˜ç¡®å‘ŠçŸ¥ç”¨æˆ·è‡ªå¯åŠ¨çŠ¶æ€

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **é¦–æ¬¡å®‰è£…**ï¼šé»˜è®¤å¼€å¯è‡ªå¯åŠ¨
2. **æ›´æ–°åº”ç”¨**ï¼šè‡ªå¯åŠ¨é…ç½®ä¿æŒä¸å˜
3. **å¸è½½åº”ç”¨**ï¼šè‡ªå¯åŠ¨é¡¹ä¼šè¢«è‡ªåŠ¨ç§»é™¤
4. **æƒé™è¦æ±‚**ï¼šæ— éœ€ç®¡ç†å‘˜æƒé™
5. **ç”Ÿæ•ˆæ—¶é—´**ï¼šä¿å­˜åç«‹å³ç”Ÿæ•ˆï¼Œä¸‹æ¬¡å¯åŠ¨æ—¶åº”ç”¨

## ğŸš€ åç»­ä¼˜åŒ–å»ºè®®

- [ ] æ·»åŠ å¯åŠ¨å»¶è¿Ÿé…ç½®ï¼ˆå»¶è¿ŸXç§’åå¯åŠ¨ï¼‰
- [ ] æ·»åŠ é™é»˜å¯åŠ¨é€‰é¡¹ï¼ˆæœ€å°åŒ–åˆ°æ‰˜ç›˜ï¼‰
- [ ] æ·»åŠ å¯åŠ¨å‚æ•°é…ç½®
- [ ] æ”¯æŒå¤šç”¨æˆ·ç¯å¢ƒ
- [ ] æ·»åŠ è‡ªå¯åŠ¨æ—¥å¿—è®°å½•

## ğŸ‰ åŠŸèƒ½ç‰¹æ€§

### âœ… å·²å®ç°
- âœ… å¼€å¯/å…³é—­è‡ªå¯åŠ¨
- âœ… é…ç½®æŒä¹…åŒ–
- âœ… é»˜è®¤å¼€å¯
- âœ… è·¨å¹³å°æ”¯æŒ (Windows/macOS/Linux)
- âœ… UIæ§åˆ¶å¼€å…³
- âœ… å®æ—¶ç”Ÿæ•ˆ
- âœ… çŠ¶æ€æ˜¾ç¤º

### ğŸ”„ å·¥ä½œæµç¨‹
1. åº”ç”¨å¯åŠ¨ â†’ è¯»å–é…ç½® â†’ åº”ç”¨è‡ªå¯åŠ¨è®¾ç½®
2. ç”¨æˆ·ä¿®æ”¹ â†’ ä¿å­˜é…ç½® â†’ æ›´æ–°ç³»ç»Ÿè‡ªå¯åŠ¨
3. é‡å¯ç³»ç»Ÿ â†’ æ ¹æ®é…ç½®è‡ªåŠ¨å¯åŠ¨åº”ç”¨

---

**å®ç°å®Œæˆæ—¶é—´**: 2025å¹´10æœˆ14æ—¥  
**è‡ªå¯åŠ¨åŠŸèƒ½çŠ¶æ€**: âœ… å®Œå…¨å¯ç”¨  
**æ”¯æŒå¹³å°**: Windows / macOS / Linux  
**é»˜è®¤çŠ¶æ€**: å¼€å¯

